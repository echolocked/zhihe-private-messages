{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://flarum-private-messages/webpack/bootstrap","webpack://flarum-private-messages/webpack/runtime/compat get default export","webpack://flarum-private-messages/webpack/runtime/define property getters","webpack://flarum-private-messages/webpack/runtime/hasOwnProperty shorthand","webpack://flarum-private-messages/external root \"flarum.core.compat['admin/app']\"","webpack://flarum-private-messages/./src/admin-forum-common.js","webpack://flarum-private-messages/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function makeSixDigitHexCode(hexColor) {\n  if (hexColor.length !== 4)\n    return hexColor;\n\n  return '#' + hexColor[1] + hexColor[1] + hexColor[2] + hexColor[2] + hexColor[3] + hexColor[3];\n}\n\nexport function getNeoncubePrivateMessagesDefaultColors(initialInstalledVersion) {\n  const useOldDefaultColors = initialInstalledVersion === '1.4.0';\n\n  const computedStyles = getComputedStyle(document.documentElement, null);\n\n  return {\n    senderBackgroundColor: makeSixDigitHexCode(computedStyles.getPropertyValue('--primary-color')),\n    recipientBackgroundColor: useOldDefaultColors ?\n      makeSixDigitHexCode(computedStyles.getPropertyValue('--muted-more-color'))\n      :\n      '#9CBF3E',\n    senderTextColor: useOldDefaultColors ?\n      makeSixDigitHexCode(computedStyles.getPropertyValue('--secondary-color'))\n      :\n      makeSixDigitHexCode(computedStyles.getPropertyValue('--text-color')),\n    recipientTextColor: useOldDefaultColors ?\n      makeSixDigitHexCode(computedStyles.getPropertyValue('--secondary-color'))\n      :\n      '#000000'\n  }\n}\n\nexport function getNeoncubePrivateMessagesColors(app) {\n  const initialInstalledVersion = app.forum.attribute('neoncubePrivateMessagesInitialInstalledVersion');\n\n  const defaultColors = getNeoncubePrivateMessagesDefaultColors(initialInstalledVersion);\n\n  const enableCustomColors = app.forum.attribute('neoncubePrivateMessagesEnableCustomColors');\n\n  return {\n    senderBackgroundColor: (enableCustomColors && app.forum.attribute('neoncubePrivateMessagesSenderBackgroundColor') || null) ?? defaultColors.senderBackgroundColor,\n    recipientBackgroundColor: (enableCustomColors && app.forum.attribute('neoncubePrivateMessagesRecipientBackgroundColor') || null) ?? defaultColors.recipientBackgroundColor,\n\n    senderTextColor: (enableCustomColors && app.forum.attribute('neoncubePrivateMessagesSenderTextColor') || null) ?? defaultColors.senderTextColor,\n    recipientTextColor: (enableCustomColors && app.forum.attribute('neoncubePrivateMessagesRecipientTextColor') || null) ?? defaultColors.recipientTextColor\n  };\n}","import app from 'flarum/admin/app';\nimport { getNeoncubePrivateMessagesDefaultColors } from '../admin-forum-common';\n\napp.initializers.add('neoncube-private-messages', () => {\n  app.extensionData\n    .for('neoncube-private-messages')\n    .registerSetting({\n      setting: 'neoncube-private-messages.return_key',\n      type: 'bool',\n      label: app.translator.trans('neoncube-private-messages.admin.settings.return_key'),\n      help: app.translator.trans('neoncube-private-messages.admin.settings.return_key_help')\n    })\n    // .registerSetting({\n    //   setting: 'neoncube-private-messages.show_read_receipts',\n    //   type: 'bool',\n    //   label: app.translator.trans('neoncube-private-messages.admin.settings.show_read_receipts'),\n    //   help: app.translator.trans('neoncube-private-messages.admin.settings.show_read_receipts_help')\n    // })\n    .registerSetting(function () {\n      const initialInstalledVersion = this.setting('neoncube-private-messages.initial_installed_version')();\n\n      const defaultColors = getNeoncubePrivateMessagesDefaultColors(initialInstalledVersion);\n\n      const enableCustomColorsSetting = this.setting('neoncube-private-messages.enable_custom_colors');\n      const senderBackgroundColorSetting = this.setting('neoncube-private-messages.sender_background_color');\n      const recipientBackgroundColorSetting = this.setting('neoncube-private-messages.recipient_background_color');\n      const senderTextColorSetting = this.setting('neoncube-private-messages.sender_text_color');\n      const recipientTextColorSetting = this.setting('neoncube-private-messages.recipient_text_color');\n\n      const enableCustomColors = enableCustomColorsSetting() !== false && enableCustomColorsSetting() !== '0' && enableCustomColorsSetting() !== '';\n\n      const senderBackgroundColor = (senderBackgroundColorSetting() || null) ?? defaultColors.senderBackgroundColor;\n      const recipientBackgroundColor = (recipientBackgroundColorSetting() || null) ?? defaultColors.recipientBackgroundColor;\n\n      const senderTextColor = (senderTextColorSetting() || null) ?? defaultColors.senderTextColor;\n      const recipientTextColor = (recipientTextColorSetting() || null) ?? defaultColors.recipientTextColor;\n\n      const colorInputStyle = {\n        width: '5em',\n        background: 'initial',\n        border: 'initial'\n      };\n\n      return (\n        <div className=\"neoncube-private-messages-color-settings-section\" style={{ 'margin-bottom': '2em' }}>\n          <h2 style={{ 'margin-bottom': '0.25em' }}>Colors</h2>\n\n          <div style={{ display: 'flex', gap: '1em', margin: '1em 0' }}>\n            <input id=\"neoncube-private-messages-enable-custom-colors\" type=\"checkbox\" checked={enableCustomColors} onchange={event => enableCustomColorsSetting(event.target.checked)} />\n\n            <label for=\"neoncube-private-messages-enable-custom-colors\">\n              {app.translator.trans('neoncube-private-messages.admin.settings.enable_custom_colors')}\n            </label>\n          </div>\n\n          <div className=\"neoncube-private-messages-color-settings\" style={{ display: 'grid', 'grid-template-columns': 'auto 1fr', gap: '1em', 'align-items': 'center', color: enableCustomColors ? null : 'gray' }}>\n            <label for=\"neoncube-private-messages-sender-background-color\">\n              {app.translator.trans('neoncube-private-messages.admin.settings.sender_background_color')}\n            </label>\n            <input id=\"neoncube-private-messages-sender-background-color\" disabled={!enableCustomColors} type=\"color\" value={senderBackgroundColor} onchange={event => senderBackgroundColorSetting(event.target.value)} style={colorInputStyle} />\n\n            <label for=\"neoncube-private-messages-recipient-background-color\">\n              {app.translator.trans('neoncube-private-messages.admin.settings.recipient_background_color')}\n            </label>\n            <input id=\"neoncube-private-messages-recipient-background-color\" disabled={!enableCustomColors} type=\"color\" value={recipientBackgroundColor} onchange={event => recipientBackgroundColorSetting(event.target.value)} style={colorInputStyle} />\n\n            <label for=\"neoncube-private-messages-sender-text-color\">\n              {app.translator.trans('neoncube-private-messages.admin.settings.sender_text_color')}\n            </label>\n            <input id=\"neoncube-private-messages-sender-text-color\" disabled={!enableCustomColors} type=\"color\" value={senderTextColor} onchange={event => senderTextColorSetting(event.target.value)} style={colorInputStyle} />\n\n            <label for=\"neoncube-private-messages-recipient-text-color\">\n              {app.translator.trans('neoncube-private-messages.admin.settings.recipient_text_color')}\n            </label>\n            <input id=\"neoncube-private-messages-recipient-text-color\" disabled={!enableCustomColors} type=\"color\" value={recipientTextColor} onchange={event => recipientTextColorSetting(event.target.value)} style={colorInputStyle} />\n          </div>\n        </div >\n      );\n    })\n    .registerPermission(\n      {\n        icon: 'fas fa-user-lock',\n        label: app.translator.trans('neoncube-private-messages.admin.permissions.start_label'),\n        permission: 'startConversation',\n      },\n      'start'\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-user-lock',\n        label: app.translator.trans('neoncube-private-messages.admin.permissions.allow_users_to_receive_email_notifications'),\n        permission: 'neoncube-private-messages.allowUsersToReceiveEmailNotifications',\n      },\n      'start'\n    );\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","makeSixDigitHexCode","hexColor","length","app","add","registerSetting","setting","type","label","trans","help","_ref","_ref2","_ref3","_ref4","initialInstalledVersion","useOldDefaultColors","computedStyles","defaultColors","this","senderBackgroundColor","getComputedStyle","document","documentElement","getPropertyValue","recipientBackgroundColor","senderTextColor","recipientTextColor","enableCustomColorsSetting","senderBackgroundColorSetting","recipientBackgroundColorSetting","senderTextColorSetting","recipientTextColorSetting","enableCustomColors","colorInputStyle","width","background","border","m","className","style","display","gap","margin","id","checked","onchange","event","target","for","color","disabled","value","registerPermission","icon","permission"],"sourceRoot":""}